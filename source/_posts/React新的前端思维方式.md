---
title: 一、React新的前端思维方式 - Note
categories: 技术
date: 2018-02-02 22:10:00
tags:
  - 笔记
  - React
  - 《深入浅出React和Redux》
---

### 快速入手

#### 1.1 初始化一个React项目
- 需具备以下条件
  - 安装了浏览器
  - 有一个命令行环境
  - 一个你喜欢的代码编辑器
  - 安装 Node.js (React是一个JavaScript语言的工具库。在这个JS工具铺天盖地的时代，没有意外，你需要安装Node.js。React本身并不依赖于Node.js，但是我们开发中用到的诸多工具需要 Node.js的支持)

- React脚手架工具：`create-react-app`
  - React技术依赖于一个很庞大的技术栈，比如Babel, Webpack, grunt/gulp... 这些技术栈都需要各自的配置文件。针对这种情况，Facebook提供一个快速开发React应用的工具，create-react-app。将开发者从配置工作中解脱出来，无需过早关注这些技术栈的细节，帮助创建一个已经完成基本配置的应用，让开发者快速开始React应用的开发。

#### 1.2 增加一个React组件

<!--more-->

- React的首要思想是通过`组件(Component)`来开发应用。
  - 组件，即能完成某个特定功能的独立的、可重用的代码。
  - 基于组件的应用开发是广泛使用的软件开发模式，用分而治之的方法，把一个大的应用分解为若干个小组件，每个组件只关注于某个小范围的特定功能，但是把组件组合起来，就能够构成一个功能庞大而且灵活的应用。

- 在使用JSX的代码文件中，即使代码中并没有直接使用React，也一定要导入React(`import React from 'react';`)。

##### 1.2.1 JSX
- JSX，是JavaScrpit的语法扩展(eXtension)，让我们在JS中可以编写像HTML一样的代码。
- JSX中使用的‘元素’不局限于HTML中的元素，可以是任何一个React组件。
- React判断一个元素是HTML元素还是React组件的原则就是看**第一个字母是否为大写**。
- 在React出现之初，很多人对React这样的JSX设计非常反感，因为其把类似HTML的标记语言和JS混在一起了，但是随着时间的推移，业界逐渐认可了这种方式。

#### 1.3 React的工作方式
比较React和JQuery

##### 1.3.1 JQuery如何工作
- 一般是，选中一些DOM元素，然后对这些元素做一些操作。这是一种最容易理解的开发模式。其一问世就得到的普遍认可，因为这种模式直观易懂。
- 但是，对于庞大的项目，这种模式会造成代码结构复杂，难以维护。

##### 1.3.2 React的理念
- React的工作方式把开发者从繁琐的操作中解放出来，开发者只需要着重“我想要显示什么”，而不用操心“怎样去做”。
- React理念，归结为一个公式，就像下面这样：`UI = render(data)`
  - 即，用户看到看到的界面(UI)，应该是一个函数（这里叫render）的执行结果，只接受数据data作为参数。
  - 这个函数是一个`纯函数`。即没有任何副作用，输出完全依赖输入的函数，两次函数调用如果输入相同，得到的结果也绝对相同。
  - 如此一来，最终的用户界面，在render函数确定的情况下，完全取决于输入数据。
  - 对于开发者，重要的是区分开哪些属于data，哪些属于render。想要更新用户界面，要做的就是更新data，用户界面自然会做出响应，即“`响应式编程`（Reactive Programming）”的思想，这也是React之所以叫React的原因。

##### 1.3.3 Virtual DOM
- 既然 React 应用就是通过重复渲染来实现用户交互，你可能会有一个疑惑：**这样的重复渲染效率会不会太低了？** 在 React 的实现方式中，看起来每次 render 函数被调用，都要把整个组件重新绘制一次，这样看起来有点浪费。
- 事实并不是这样，React 利用`Virtual DOM`，让每次渲染都**只重新渲染最少的 DOM 元素**。
- Web 前端开发关于性能优化有一个原则：**尽量减少 DOM 操作**。
- DOM 树是对 HTML 的抽象，Virtual DOM 就是对 DOM 树的抽象。
- `Virtual DOM`不会触及浏览器部分，只是存在于 JavaScript 空间的树形结构。
- 每次自上而下渲染 React 组件时，**会对比这一次产生的 Virtual DOM 和上一次渲染的 Virtual DOM**，然后修改真正的 DOM 树时就只需要触及差别中的部分就行了。

##### 1.3.4 React 工作方式的优点
- React 利用函数式编程的思维解决用户界面渲染的问题，最大的优势在于开发者的效率会大大提高，代码的可维护性和可阅读性大大增强。

#### 1.4 本章小结
- React 的主要理念之一就是**基于组件来开发应用**。
- React 利用**声明式的语法**，大大提高了开发效率和代码质量。
- 虽然 React 是通过重复渲染来实现动态更新效果，但是借助`Virtual DOM`技术，实际这个过程并不牵涉太多的 DOM 操作，所以**渲染效率很高**。
- 理解 React 的工作方式，是踏入 React 世界的关键一步。

> 参考
> * 程墨 - 《深入浅出React和Redux》
